var TAG="projects.js :: ",PROJECT_IDS=[],OPENED=[],RECTANGLES=!0,SOFTWARE=!0,HARDWARE=!0;(function(){for(var a=document.getElementsByClassName("project-article"),b=0;b<a.length;b++){var c=a[b].children;2===c.length?PROJECT_IDS.push(c[1].getAttribute("id")):(console.error(TAG+"Expected two children inside of this project article element"),console.error(c));OPENED.push(!1)}})();console.log(TAG+"# of projects: "+PROJECT_IDS.length+".");
(function(){PROJECT_IDS.forEach(function(a,b,c){b=document.getElementById(a+"Header").getElementsByTagName("p");for(c=0;c<b.length;c++)for(var d=0;d<b[c].getElementsByTagName("a").length;d++)document.getElementById(a+"Header").getElementsByTagName("p")[c].getElementsByTagName("a")[d].onclick=function(a){a.stopPropagation()}})})();
(function(){for(var a=0;a<document.getElementsByTagName("mark").length;a++)document.getElementsByTagName("mark")[a].addEventListener("click",function(a){a.stopPropagation();document.getElementById("search").value&&0!==document.getElementById("search").value.length?document.getElementById("search").value.includes(this.innerHTML)||(document.getElementById("search").value+=", "+this.innerHTML,verifySearchField()):(document.getElementById("search").value=this.innerHTML,verifySearchField())},!1)})();
function resizeSections(a){a=document.getElementById(a).getElementsByClassName("section-half");for(var b=0;b<a.length;b+=2){var c=a[b].offsetHeight>a[b+1].offsetHeight?a[b].offsetHeight:a[b+1].offsetHeight,c=100*c/window.innerWidth;a[b].style.height=c+"vw";a[b+1].style.height=c+"vw"}}function resetSections(a){a=document.getElementById(a).getElementsByClassName("section-half");for(var b=0;b<a.length;b++)a[b].style.height="auto"}
function pauseAllVideos(){for(var a=document.getElementsByTagName("video"),b=0;b<a.length;b++)a[b].pause()}function pauseAllVideos(a){for(var b=0;b<PROJECT_IDS.length;b++)if(PROJECT_IDS[b]===a){a=document.getElementById(PROJECT_IDS[b]).getElementsByTagName("video");for(b=0;b<a.length;b++)a[b].play();break}}
function playAllVideos(a){for(var b=0;b<PROJECT_IDS.length;b++)if(PROJECT_IDS[b]===a){a=document.getElementById(PROJECT_IDS[b]).getElementsByTagName("video");for(b=0;b<a.length;b++)a[b].play();break}}
function toggle(a){PROJECT_IDS.forEach(function(b,c,d){if(b===a){var e;OPENED[c]?(RECTANGLES||square(a),pauseAllVideos(a),OPENED[c]=!1,e=resetSections):(RECTANGLES||rectangle(a),playAllVideos(a),OPENED[c]=!0,e=resizeSections);$("#"+b).slideToggle({duration:500,easing:"easeInOutQuart",complete:function(){e(a)}})}})}
function show(){PROJECT_IDS.forEach(function(a,b,c){OPENED[b]||(RECTANGLES||rectangle(a),playAllVideos(a),OPENED[b]=!0,$("#"+a).slideDown({duration:500,easing:"easeInOutQuart",complete:function(){resizeSections(a)}}))})}function hide(){pauseAllVideos();PROJECT_IDS.forEach(function(a,b,c){OPENED[b]&&(RECTANGLES||square(a),pauseAllVideos(a),OPENED[b]=!1,$("#"+a).slideUp({duration:500,easing:"easeInOutQuart",complete:function(){resetSections(a)}}))})}
function verifySearchField(){var a=document.getElementById("search").value,b=!0,c=!0;!a||0===a.length||/^[a-zA-Z0-9 ,.'\-]+$/.test(a)?($("#letters").slideUp({duration:500,easing:"easeInOutQuart"}),b=!1):$("#letters").slideDown({duration:500,easing:"easeInOutQuart"});60>=a.length?($("#length").slideUp({duration:500,easing:"easeInOutQuart"}),c=!1):$("#length").slideDown({duration:500,easing:"easeInOutQuart"});b||c?document.getElementById("submitButton").setAttribute("disabled",!0):document.getElementById("submitButton").removeAttribute("disabled");
if(c!=("none"!==document.getElementById("length").style.display)||b!=("none"!==document.getElementById("letters").style.display))return b||c?!1:!0}
(function(){function a(){var a=new XMLHttpRequest,d=new FormData(b);a.addEventListener("load",function(a){if(200!==a.target.status)throw'Error: Server returned "'+a.target.status+" "+a.target.statusText+'"';a=JSON.parse(a.target.responseText);for(var b=0;b<a.projects.length;b++)document.getElementById("projects").insertBefore(document.getElementById(a.projects[b].id+"Article"),b+1!==a.projects.length?document.getElementById("projects").children[b]:null);for(b=0;b<document.getElementsByTagName("mark").length;b++){for(var c=
!1,d=0;d<a.keywords.length;d++){var f=document.getElementsByTagName("mark")[b].innerHTML.toLowerCase(),g=a.keywords[d].toLowerCase();if(f.includes(g)||g.includes(f))c=!0}c?document.getElementsByTagName("mark")[b].setAttribute("class","searched"):document.getElementsByTagName("mark")[b].removeAttribute("class")}});a.addEventListener("error",function(a){alert("Oops! Something goes wrong.")});a.open("POST","/projects");a.send(d)}var b=document.getElementById("searchForm");b.addEventListener("submit",
function(b){verifySearchField()?!1===JSON.parse(document.getElementById("reload").value)&&(b.preventDefault(),a()):b.preventDefault()})})();
function square(a){var b=document.getElementById(a+"Header");if(!b)throw"Error: No such header with id -> "+a+"Header";document.getElementById(a+"Article").style.display="inline-block";document.getElementById(a+"Article").style.marginRight="0.5vw";document.getElementById(a+"Article").style.marginLeft="0.5vw";for(var c=0;c<b.children.length;c++)"img"!==b.children[c].tagName.toLowerCase()?document.getElementById(a+"Header").children[c].style.display="none":document.getElementById(a+"Header").children[c].style.display=
"block"}function squares(){hide();RECTANGLES&&(RECTANGLES=!1,document.getElementById("rectangles").removeAttribute("active"),document.getElementById("squares").setAttribute("active",""),PROJECT_IDS.forEach(function(a,b,c){square(a)}))}
function rectangle(a){var b=document.getElementById(a+"Header");if(!b)throw"Error: No such header with id -> "+a+"Header";document.getElementById(a+"Article").style.display="block";document.getElementById(a+"Article").style.marginRight="0";document.getElementById(a+"Article").style.marginLeft="0";for(var c=0;c<b.children.length;c++)"img"!==b.children[c].tagName.toLowerCase()?document.getElementById(a+"Header").children[c].style.display="block":document.getElementById(a+"Header").children[c].removeAttribute("style")}
function rectangles(){hide();RECTANGLES||(RECTANGLES=!0,document.getElementById("rectangles").setAttribute("active",""),document.getElementById("squares").removeAttribute("active"),PROJECT_IDS.forEach(function(a,b,c){rectangle(a)}))}
function software(){if(SOFTWARE){document.getElementById("software").removeAttribute("active");HARDWARE||hardware();SOFTWARE=!1;for(var a=0;a<document.getElementsByClassName("project-article").length;a++)null!==document.getElementsByClassName("project-article")[a].getAttribute("software")&&(document.getElementsByClassName("project-article")[a].style.display="none")}else for(document.getElementById("software").setAttribute("active",""),SOFTWARE=!0,a=0;a<document.getElementsByClassName("project-article").length;a++)null!==
document.getElementsByClassName("project-article")[a].getAttribute("software")&&document.getElementsByClassName("project-article")[a].removeAttribute("style")}
function hardware(){if(HARDWARE){document.getElementById("hardware").removeAttribute("active");SOFTWARE||software();HARDWARE=!1;for(var a=0;a<document.getElementsByClassName("project-article").length;a++)null!==document.getElementsByClassName("project-article")[a].getAttribute("hardware")&&(document.getElementsByClassName("project-article")[a].style.display="none")}else for(document.getElementById("hardware").setAttribute("active",""),HARDWARE=!0,a=0;a<document.getElementsByClassName("project-article").length;a++)null!==
document.getElementsByClassName("project-article")[a].getAttribute("hardware")&&document.getElementsByClassName("project-article")[a].removeAttribute("style")}console.log(TAG+"Script loaded completely.");
